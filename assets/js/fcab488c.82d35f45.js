"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[16],{1656:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>u,toc:()=>d});var a=t(4848),s=t(8453),r=t(1470),l=t(9365);const o={title:"JDash Events"},i=void 0,u={id:"jdash-events",title:"JDash Events",description:"This section will cover the features of the JDash Events module.",source:"@site/docs/jdash-events.mdx",sourceDirName:".",slug:"/jdash-events",permalink:"/jdash-events",draft:!1,unlisted:!1,editUrl:"https://github.com/Alex1304/jdash/edit/master/website/docs/jdash-events.mdx",tags:[],version:"current",frontMatter:{title:"JDash Events"},sidebar:"someSidebar",previous:{title:"JDash Client",permalink:"/jdash-client"},next:{title:"JDash Graphics",permalink:"/jdash-graphics"}},c={},d=[{value:"Installation",id:"installation",level:2},{value:"The event loop",id:"the-event-loop",level:2},{value:"Starting an event loop with default parameters",id:"starting-an-event-loop-with-default-parameters",level:3},{value:"Building a custom event loop",id:"building-a-custom-event-loop",level:3},{value:"Subscribing to events",id:"subscribing-to-events",level:3},{value:"Stopping an event loop",id:"stopping-an-event-loop",level:3}];function v(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"This section will cover the features of the JDash Events module."}),"\n",(0,a.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(n.p,{children:"Add the Maven or Gradle dependency to your project as described below:"}),"\n",(0,a.jsxs)(r.A,{groupId:"build-tools",defaultValue:"maven",values:[{label:"Maven",value:"maven"},{label:"Gradle",value:"gradle"}],children:[(0,a.jsx)(l.A,{value:"maven",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.alex1304.jdash</groupId>\n    <artifactId>jdash-events</artifactId>\n    <version>${version}</version> \x3c!-- replace with latest version --\x3e\n</dependency>\n"})})}),(0,a.jsx)(l.A,{value:"gradle",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-groovy",children:"repositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Replace ${version} with latest version\n    implementation 'com.alex1304.jdash:jdash-events:${version}'\n}\n"})})})]}),"\n",(0,a.jsx)(n.h2,{id:"the-event-loop",children:"The event loop"}),"\n",(0,a.jsx)(n.p,{children:"An event loop is a task that runs in the background that will repeat some identical requests at regular intervals, and emit events in response to something that is detected when comparing the results of those repeated requests. JDash provides an event loop that allows to perform specific requests using the client in order to emit events such as new rated levels or Daily level changes."}),"\n",(0,a.jsx)(n.h3,{id:"starting-an-event-loop-with-default-parameters",children:"Starting an event loop with default parameters"}),"\n",(0,a.jsx)(n.p,{children:"Very simple:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"GDClient client = GDClient.create();\n\nGDEventLoop eventLoop = GDEventLoop.startWithDefaults(client);\n"})}),"\n",(0,a.jsx)(n.p,{children:"This starts an event loop with the following default characteristics:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Produces events related to changes in the Awarded category and changes in the Daily level/Weekly demon"}),"\n",(0,a.jsx)(n.li,{children:"A default interval of 1 minute: the loop will repeat requests every 1 minute"}),"\n",(0,a.jsxs)(n.li,{children:["Emits events on ",(0,a.jsx)(n.code,{children:"Schedulers.boundedElastic()"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"building-a-custom-event-loop",children:"Building a custom event loop"}),"\n",(0,a.jsx)(n.p,{children:"It is possible to customize the event loop using the builder:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"GDEventLoop customLoop = GDEventLoop.builder(client)\n        .setEventProducers(Set.of(GDEventProducer.awardedLevels()))\n        .setInterval(Duration.ofSeconds(15))\n        .setScheduler(Schedulers.immediate())\n        .buildAndStart();\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Here we are building a loop that only produces events related to awarded levels; it won't make requests for Daily levels and Weekly demons. It will make requests every 15 seconds and will emit events on ",(0,a.jsx)(n.code,{children:"Schedulers.immediate()"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"subscribing-to-events",children:"Subscribing to events"}),"\n",(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.code,{children:"eventLoop.on(type)"})," to subscribe to the event flux:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'eventLoop.on(AwardedLevelAdd.class)\n        .subscribe(event -> System.out.println("New level rated: "\n                + event.addedLevel().name()));\n\neventLoop.on(AwardedLevelRemove.class)\n        .subscribe(event -> System.out.println("Level unrated: "\n                + event.removedLevel().name()));\n\neventLoop.on(AwardedLevelUpdate.class)\n        .subscribe(event -> System.out.println("Level rating changed. Before: "\n                + event.oldData() + " - After: " + event.newData()));\n\neventLoop.on(AwardedListAdd.class)\n        .subscribe(event -> System.out.println("New list rated: "\n                + event.addedList().name()));\n\neventLoop.on(AwardedListRemove.class)\n        .subscribe(event -> System.out.println("List unrated: "\n                + event.removedList().name()));\n\neventLoop.on(AwardedListUpdate.class)\n        .subscribe(event -> System.out.println("List rating changed. Before: "\n                + event.oldData() + " - After: " + event.newData()));\n\neventLoop.on(DailyLevelChange.class)\n        .subscribe(event -> System.out.println("New Daily level: "\n                + event.after().name()));\n\neventLoop.on(WeeklyDemonChange.class)\n        .subscribe(event -> System.out.println("New Weekly demon: "\n                + event.after().name()));\n'})}),"\n",(0,a.jsx)(n.h3,{id:"stopping-an-event-loop",children:"Stopping an event loop"}),"\n",(0,a.jsxs)(n.p,{children:["Just invoke ",(0,a.jsx)(n.code,{children:"eventLoop.stop()"}),". The event loop instance will stop making requests and will terminate all current subscriptions to ",(0,a.jsx)(n.code,{children:"eventLoop.on(type)"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(v,{...e})}):v(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>l});t(6540);var a=t(8215);const s={tabItem:"tabItem_Ymn6"};var r=t(4848);function l(e){let{children:n,hidden:t,className:l}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(s.tabItem,l),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(6540),s=t(8215),r=t(3104),l=t(6347),o=t(205),i=t(7485),u=t(1682),c=t(9466);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function v(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:s}}=e;return{value:n,label:t,attributes:a,default:s}}))}(t);return function(e){const n=(0,u.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const s=(0,l.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,i.aZ)(r),(0,a.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})}),[r,s])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,r=v(e),[l,i]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:r}))),[u,d]=p({queryString:t,groupId:s}),[m,b]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,r]=(0,c.Dv)(t);return[s,(0,a.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:s}),f=(()=>{const e=u??m;return h({value:e,tabValues:r})?e:null})();(0,o.A)((()=>{f&&i(f)}),[f]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),b(e)}),[d,b,r]),tabValues:r}}var b=t(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(4848);function x(e){let{className:n,block:t,selectedValue:a,selectValue:l,tabValues:o}=e;const i=[],{blockElementScrollPositionUntilNextRender:u}=(0,r.a_)(),c=e=>{const n=e.currentTarget,t=i.indexOf(n),s=o[t].value;s!==a&&(u(n),l(s))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=i.indexOf(e.currentTarget)+1;n=i[t]??i[0];break}case"ArrowLeft":{const t=i.indexOf(e.currentTarget)-1;n=i[t]??i[i.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>i.push(e),onKeyDown:d,onClick:c,...r,className:(0,s.A)("tabs__item",f.tabItem,r?.className,{"tabs__item--active":a===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:s}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function w(e){const n=m(e);return(0,g.jsxs)("div",{className:(0,s.A)("tabs-container",f.tabList),children:[(0,g.jsx)(x,{...n,...e}),(0,g.jsx)(j,{...n,...e})]})}function y(e){const n=(0,b.A)();return(0,g.jsx)(w,{...e,children:d(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var a=t(6540);const s={},r=a.createContext(s);function l(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);