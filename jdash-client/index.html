<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="JDash Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="JDash Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-KZS4FVPEGD","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KZS4FVPEGD"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KZS4FVPEGD",{})</script><title data-react-helmet="true">JDash Client | JDash</title><meta data-react-helmet="true" property="og:url" content="https://jdash.alex1304.com/jdash-client"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="JDash Client | JDash"><meta data-react-helmet="true" name="description" content="This section will cover the features of the JDash Client module."><meta data-react-helmet="true" property="og:description" content="This section will cover the features of the JDash Client module."><link data-react-helmet="true" rel="shortcut icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jdash.alex1304.com/jdash-client"><link data-react-helmet="true" rel="alternate" href="https://jdash.alex1304.com/jdash-client" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jdash.alex1304.com/jdash-client" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a4ab39f4.css">
<link rel="preload" href="/assets/js/runtime~main.2512ee5a.js" as="script">
<link rel="preload" href="/assets/js/main.26eb5f15.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><strong class="navbar__title">JDash</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Alex1304/jdash" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">JDash</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/Alex1304/jdash" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/">Introduction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/jdash-client">JDash Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jdash-events">JDash Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/jdash-graphics">JDash Graphics</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">JDash Client</h1></header><div class="markdown"><p>This section will cover the features of the JDash Client module.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="installation"></a>Installation<a class="hash-link" href="#installation" title="Direct link to heading">#</a></h2><p>Add the Maven or Gradle dependency to your project as described below:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Maven</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Gradle</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly xml"><div tabindex="0" class="prism-code language-xml codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">dependency</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">groupId</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">com.alex1304.jdash</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">groupId</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">artifactId</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">jdash-client</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">artifactId</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">version</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain">${version}</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">version</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">&lt;!-- replace with latest version --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">dependency</span><span class="token tag punctuation" style="color:rgb(212, 212, 212)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><div tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">repositories {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    mavenCentral()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">dependencies {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    // Replace ${version} with latest version</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    implementation &#x27;com.alex1304.jdash:jdash-client:${version}&#x27;</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using-the-client"></a>Using the client<a class="hash-link" href="#using-the-client" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-a-client"></a>Creating a client<a class="hash-link" href="#creating-a-client" title="Direct link to heading">#</a></h3><p>Very simple:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDClient client = GDClient.create();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The above will create a client with the following default characteristics:</p><ul><li>The default router: will route requests to the official Geometry Dash server</li><li>No caching: results of requests will not be cached</li><li>A random UUID: it has no practical use but may be used by the server to uniquely identify the client</li><li>An empty set of followed account IDs: when requesting the &quot;Followed&quot; category of levels, the client follows nobody by default</li><li>No authentication: the client will not be logged in to any account.</li></ul><p>You may customize each of the above properties by chaining <code>with*</code> methods:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDClient client = GDClient.create()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .withRouter(/* router */)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .withCache(/* cache */)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .withUniqueDeviceId(/* UUID */)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .withFollowedAccountIds(/* Set of followed account IDs */)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .withAuthentication(/* player ID, account ID, account password */);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p><code>GDClient</code> instances are immutable, meaning that calling one of the <code>with*</code> methods alone without storing the return value will do nothing. Just like doing <code>String.toUpperCase()</code> without storing the return value will not have any effect. Each <code>with*</code> method creates a new copy of <code>GDClient</code> with the new characteristics without altering the existing instance.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="making-requests"></a>Making requests<a class="hash-link" href="#making-requests" title="Direct link to heading">#</a></h3><p>Once your client is ready, you can use it to make requests to get data from Geometry Dash. Here is an example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDLevel level = client.findLevelById(10565740).block();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">System.out.println(level);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>As the name suggests, <code>findLevelById</code> allows to retrieve data on a level by providing its ID. You can check the <a href="https://javadoc.io/doc/com.alex1304.jdash/jdash-client" target="_blank" rel="noopener noreferrer">Javadoc</a> to get the full list of methods that the client supports.</p><p>Did you notice the <code>.block()</code> at the end? This is because all methods performing a request return a <code>org.reactivestreams.Publisher</code> (more specifically a <code>reactor.core.publisher.Mono</code> for requests expecting a single result, and a <code>reactor.core.publisher.Flux</code> for requests expecting multiple results). The request is executed if and only if the <code>Mono</code> or the <code>Flux</code> is subscribed to. The <code>.block()</code> method subscribes to the publisher and blocks the current thread until the request completes and emits the result. You can use alternatively <code>.subscribe(Consumer)</code> to handle the result in a callback without blocking the current thread:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">client.getUserProfile(98006).subscribe(System.out::println); // will not block</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>You also have many useful methods like <code>.map</code>, <code>.filter</code>, <code>.flatMap</code>, etc to process results and chain requests in a pipelined way, similar to <code>java.util.Stream</code> but even more powerful:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">// Prints the title of the song used in the level of ID 10565740 (Bloodbath)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">client.downloadLevel(10565740)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .filter(level -&gt; level.songId().isPresent())</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .flatMap(level -&gt; client.getSongInfo(level.songId().orElseThrow()))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .map(GDSong::title)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .subscribe(System.out::println); // Prints &quot;At the Speed of Light&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>If a method returns a <code>Flux&lt;T&gt;</code>, you can convert it to a <code>Mono&lt;List&lt;T&gt;&gt;</code> using <code>Flux.collectList()</code>.</p></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Check out the <a href="https://projectreactor.io" target="_blank" rel="noopener noreferrer">Project Reactor docs</a> to learn more.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-router"></a>The router<a class="hash-link" href="#the-router" title="Direct link to heading">#</a></h3><p>The router is in charge of accepting requests and sending them over to the server. By default, the client routes requests to the official Geometry Dash server. By customizing the router, you will be able to:</p><ul><li>Change the server URL for example to route requests to a Geometry Dash private server (GDPS)</li><li>Set a limit in the number of requests that can be sent within a certain timeframe to avoid spamming the server with requests</li><li>Set a timeout to make requests fail when they take too long to be processed</li><li>Change the scheduler on which to emit responses.</li></ul><p>You can customize any of the aforementioned parameters by doing this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDRouter router = GDRouter.builder()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // You can set the URL to a GDPS here</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .setBaseUrl(&quot;https://gdps.alex1304.com/database&quot;)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // We are limiting to 1 request per second. Excessive requests will be queued.</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .setRequestLimiter(RequestLimiter.of(1, Duration.ofSeconds(1)))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // Make requests fail if they take more than 3 seconds to complete</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .setRequestTimeout(Duration.ofSeconds(3))</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // Schedulers.immediate() can improve performance, but you are not allowed to</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // use .block() if you use that. The one by default is Schedulers.boundedElastic()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        // which allows blocking calls.</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .setScheduler(Schedulers.immediate())</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .build();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">// You can then pass this router to a client</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDClient client = GDClient.create().withRouter(router);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-cache"></a>The cache<a class="hash-link" href="#the-cache" title="Direct link to heading">#</a></h3><p>If you are doing the same requests multiple times, you may want a cache system to avoid sending a request to the server for data you&#x27;ve already fetched previously. JDash comes with a cache API to easily get that up for you.</p><p>A cache is represented by the <code>GDCache</code> interface. Three implementations are provided by default:</p><ul><li><code>GDCache.disabled()</code>: an implementation that does nothing. Its purpose is to simulate a disabled cache.</li><li><code>GDCache.inMemory()</code>: an implementation based on a simple <code>ConcurrentHashMap</code> that caches everything indefinitely. It has the advantage of not requiring any extra configuration for it to work, but may cause memory leaks if not manually cleared regularly.</li><li><code>GDCache.caffeine(UnaryOperator)</code>: an implementation based on the <a href="https://github.com/ben-manes/caffeine" target="_blank" rel="noopener noreferrer">Caffeine library</a> which allows to customize things such as the duration data should stay in cache after last access and the maximum size.</li></ul><p>An example of cache automatically clearing elements 10 minutes after last access:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDCache cache = GDCache.caffeine(caffeine -&gt; caffeine.expireAfterAccess(Duration.ofMinutes(10)));</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDClient client = GDClient.create().withCache(cache);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>It is possible to disable the cache for specific requests. For example if you want to be sure to get the latest Daily level info and not something potentially outdated from cache:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDTimelyInfo info = client.withCacheDisabled().getDailyLevelInfo().block();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="authentication"></a>Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">#</a></h3><p>Some requests require authentication in order to be executed. For example, the following will fail:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDClient client = GDClient.create();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">List&lt;GDPrivateMessage&gt; privateMessages = client.getPrivateMessages(0) // IllegalStateException</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .collectList()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .block();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In order to authenticate the client, you have two options:</p><ul><li>Use <code>client.withAuthentication(playerId, accountId, accountPassword)</code>. This method returns a <code>GDClient</code> directly, but it requires you to know your player ID and your account ID. Also, it won&#x27;t validate if the password is correct.</li><li>Use <code>client.login(username, password)</code>. It allows to login using your username instead of your account and player IDs, and will properly validate your credentials. However, it will require the client to make a request to the server, so it will return a <code>Mono&lt;GDClient&gt;</code> instead of a <code>GDClient</code> like the first method.</li></ul><p>The following will work, assuming credentials are valid:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDClient client = GDClient.create().withAuthentication(123, 456, &quot;MyP@ssw0rd&quot;);</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">// OR</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">GDClient client = GDClient.create().login(&quot;Player123&quot;, &quot;MyP@ssw0rd&quot;).block();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">List&lt;GDPrivateMessage&gt; privateMessages = client.getPrivateMessages(0)</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .collectList()</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">        .block(); // It works!</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="handling-exceptions"></a>Handling exceptions<a class="hash-link" href="#handling-exceptions" title="Direct link to heading">#</a></h2><p>When using the client, you will inevitably come across exceptions when executing requests. Any error that is emitted through <code>Mono</code> and <code>Flux</code> is wrapped inside a <code>GDClientException</code>. So all you need to do is to catch <code>GDClientException</code> when blocking, or use <code>Flux/Mono.onErrorResume(GDClientException.class, e -&gt; ...)</code> if you don&#x27;t block. Use <code>GDClientException.getCause()</code> to get the original exception.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#9CDCFE;background-color:#1E1E1E"><div class="token-line" style="color:#9CDCFE"><span class="token plain">try {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    GDUserProfile user = client.getUserProfile(98006).block();</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">} catch (GDClientException e) {</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    // Handle error here</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">    Throwable cause = e.getCause(); // the original exception</span></div><div class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The original exception obtained via <code>getCause()</code> can be of any nature, but here are the most frequent ones:</p><ul><li><code>ActionFailedException</code>: emitted when the GD server returns an error code like <code>-1</code></li><li><code>HttpResponseException</code>: emitted when the GD server returns an unusual HTTP error code like <code>500 Internal Server Error</code></li><li><code>ResponseDeserializationException</code>: emitted when the GD server returns data that could not be decoded into a valid Java object like <code>GDLevel</code> or <code>GDUserProfile</code>. Generally, this exception also carries its own <code>getCause()</code> providing details on why the deserialization failed.</li><li><code>RetryExhaustedException</code>: emitted when there are communication problems with the GD server. By default, the request is retried automatically up to 10 times when the connection fails, but if all attempts are exhausted it will result in this exception being emitted.</li><li><code>EmissionException</code>: emitted when the request could not be queued. It can happen if the request queue of the router is full.</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>The <code>IllegalStateException</code> that happens when calling a method requiring authentication with a non-authenticated client is thrown immediately upon calling the method; it is not emitted through the <code>Flux</code>/<code>Mono</code> upon subscription.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Alex1304/jdash/edit/master/website/docs/jdash-client.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/jdash-events"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JDash Events Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#using-the-client" class="table-of-contents__link">Using the client</a><ul><li><a href="#creating-a-client" class="table-of-contents__link">Creating a client</a></li><li><a href="#making-requests" class="table-of-contents__link">Making requests</a></li><li><a href="#the-router" class="table-of-contents__link">The router</a></li><li><a href="#the-cache" class="table-of-contents__link">The cache</a></li><li><a href="#authentication" class="table-of-contents__link">Authentication</a></li></ul></li><li><a href="#handling-exceptions" class="table-of-contents__link">Handling exceptions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Alexandre Miranda (Alex1304). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2512ee5a.js"></script>
<script src="/assets/js/main.26eb5f15.js"></script>
</body>
</html>